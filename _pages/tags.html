---
layout: page
title: Posts By Tags
permalink: /tags
---

{% comment %}
<!--
Sort by name
- Create an empty array.
- Obtain a tag name and push it to the array.
- Sort the array (by tag names).
-->
{% endcomment %}

{% assign sorted_by_name = "" | split: "|" %}

{% for posts_by_tag in site.tags %}
  {% assign sorted_by_name = sorted_by_name | push: posts_by_tag.first %}
{% endfor %}

{% assign sorted_by_name = sorted_by_name | sort %}

{% comment %}
<!--
Sort by count
- Create an empty array.
- For each tag
  - Obtain a tag name and tag count.
  - Format the tag in "1003#name(3)".
  - Push the tag to the array.
- Sort the array (effectively by tag count).
- Reverse the array and remove the prefix from each element.
-->
{% endcomment %}

{% assign sorted_by_count = "" | split: "|" %}

{% for posts_by_tag in site.tags %}
  {% assign tag    = posts_by_tag.first %}
  {% assign count  = site.tags[tag].size %}
  {% assign prefix = count | plus: 1000 %}
  {% assign tag = tag | prepend: '#' | prepend: prefix %}
  {% assign tag = tag | append: '(' | append: count | append: ')' %}
  {% assign sorted_by_count = sorted_by_count | push: tag %}
{% endfor %}

{% assign sorted_by_count = sorted_by_count | sort %}

{% assign tmp_array = "" | split: "|" %}
{% for prefixed_tag in sorted_by_count reversed %}
  {% capture tag_with_count %}
    {{ prefixed_tag | slice: 5, 100 }}
  {% endcapture %}

  {% assign tmp_array = tmp_array | push: tag_with_count %}
{% endfor %}

{% assign sorted_by_count = tmp_array %}

{% include tag_cloud.html tag_names=sorted_by_count %}

<hr>

<section class="posts-by-tags">
  {% for tag_name in sorted_by_name %}
    <div>
      <h3 id="{{ tag_name }}">
        {{ tag_name | upcase | replace: "_", " " }}
      </h3>

      <ul class="related-posts">
        {% for post in site.tags[tag_name] %}
          <li>
            <a href="{{ post.url | prepend: site.baseurl }}">
              {{ post.title }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  {% endfor %}
</section>
